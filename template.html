<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
{% set module_name = mib.find("./module").get("name") %}
{% macro decode_TagStr(tstr) -%}
{%- if tstr is not iterable -%}
{%- set tstr = [tstr] -%}
{%- endif %}
{% for s in tstr -%}
{{ s }}
{%- endfor %}
{% endmacro %}
{% macro draw_row(n,tag="td",syntax="", oid_suffix="") -%}
<{{tag}} class="mib_indent">
{%- for i in n.get("oid")|calc_indent -%}
<span class="tree_pattern{{i}}">
{%- if i >= 2 -%}
<span class="tree_hline"> </span>
{%- endif -%}
</span>
{%- endfor -%}
</{{tag}}><{{tag}}>{{ n.get("name") }}</{{tag}}><{{tag}}>{{ n.get("oid")|short_oid }}{{ oid_suffix }}</{{tag}}>
{%- set desc = n.find("description") %}
<{{tag}} class="mib_desc">{{ desc.text|truncate(120) }}</{{tag}}>
<{{tag}}>{{ syntax }}</{{tag}}>
{%- endmacro %}
{%- macro build_name_list(obj_list) -%}
    {%- set objs = [] -%}
    {%- for obj in obj_list -%}
      {%- set dummy = objs.append( obj.get("name")) -%}
    {%- endfor -%}
    {{ objs|join(", ") }}
{%- endmacro -%}
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.10.0/build/cssnormalize/cssnormalize-min.css">
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.10.0/build/cssgrids/cssgrids-min.css">
<!-- <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.10.0/build/cssgrids-responsive/cssgrids-responsive-min.css"> -->
<link rel="stylesheet" type="text/css" href="mibstyle.css">
<title>{{ module_name }}</title>
</head>
<body>
<div id="hd">
<h1>MIB: {{ module_name }} </h1>
</div>
<div class="yui3-g" id="layout">
<div class="yui3-u" id="nav">
</div>
<div class="yui3-u" id="main-content">
<h1>MIB: {{ module_name }} </h1>
<pre>
{{ mib.find("./module/description").text}}
</pre>
<p>identity oid: {{root}}</p>
<h1>Main MIB Tree</h1>
<table id="nodes" class="main">
    <thead>
        <th style="width: 6em">1234567890</th>
        <th>Name</th>
        <th>oid</th>
        <th>description</th>
        <th>syntax</th>
    </thead>
    <tbody>
    {%- for oid_t, node in mib_array %}
        {%- if node.tag == 'scalar' -%}
        <tr class="{{ node.tag }}">{{ draw_row(node, syntax=node|format_syntax) }}</tr>
        {%- elif node.tag == 'node' -%}
        <tr class="{{ node.tag }}">{{ draw_row(node) }}</tr>
        {% elif node.tag == 'table' %}
        <tr class="{{ node.tag }}">{{ draw_row(node) }}</tr>
        {%- set row = node.find("row") -%}
        <tr class="row">{{ draw_row(row, syntax=build_name_list(row.iterfind("./linkage/*" ))) }}</tr>
        {%- set suffix = row|linkage_suffix -%}
        {%- for col in row.iterfind("column") -%}
        <tr class="column {{"column_first" if loop.first}} {{"column_last" if loop.last}}">{{ draw_row(col,oid_suffix=suffix, syntax=col|format_syntax) }}</tr>
        {%- endfor -%}
        {%- elif node.tag == 'notification' -%}
        <tr class="{{ node.tag }}">{{ draw_row(node,syntax=build_name_list(node.iterfind("./objects/object" ))) }}</tr>
        {%- elif node.tag == 'group' -%}
        <tr class="{{ node.tag }}">{{ draw_row(node,syntax=build_name_list(node.iterfind("./members/member" ))) }}</tr>
        {%- elif node.tag == 'compliance' -%}
        <tr class="{{ node.tag }}">{{ draw_row(node,syntax=build_name_list(node.iterfind("./requires/*" ))) }}</tr>
        {%- else -%}
        <tr class="{{ node.tag }}">{{ draw_row(node,syntax="under construction") }}</tr>
        {%- endif -%}
    {%- endfor %}
</tbody>
</table>
<h1>Notifications</h1>
<h1>Groups &amp; Compliances</h1>
<h1>Type Definitions</h1>
<h1>Imports</h1>
<table id="imports" class="main">
    <thead>
        <th>#</th>
        <th>name</th>
        <th>module</th>
    </thead>
    <tbody>
{%- for node in mib.findall("./imports/import") -%}
<tr><td>{{ loop.index }}</td><td>{{ node.get("name") }}</td><td>{{ node.get("module") }}</td></tr>
{% endfor %}
</tbody>
</table>

</div><!-- main-content -->
</div><!-- layout -->
</body>
</html>
